{"ast":null,"code":"import _regeneratorRuntime from\"D:/Humber 2023/Semester 3/Capstone Project/urban_clothing_v1.0/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"D:/Humber 2023/Semester 3/Capstone Project/urban_clothing_v1.0/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";var _ref,_ref3,_ref4;import{createAsyncThunk,createSlice}from\"@reduxjs/toolkit\";import{createUser,checkUser,signOut}from\"./authAPI\";import{updateUser}from\"../user/userAPI\";var initialState={value:0,status:\"idle\",loggedInUserToken:null,error:null};export var createUserAsync=createAsyncThunk(\"user/createUser\",function(_x){return(_ref=_ref||_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(userData){var response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return createUser(userData);case 2:response=_context.sent;return _context.abrupt(\"return\",response.data);case 4:case\"end\":return _context.stop();}},_callee);}))).apply(this,arguments);});export var checkUserAsync=createAsyncThunk(\"user/checkUser\",function(_x2,_x3){return(_ref3=_ref3||_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(loginInfo,_ref2){var rejectWithValue,response;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:rejectWithValue=_ref2.rejectWithValue;_context2.prev=1;_context2.next=4;return checkUser(loginInfo);case 4:response=_context2.sent;return _context2.abrupt(\"return\",response.data);case 8:_context2.prev=8;_context2.t0=_context2[\"catch\"](1);console.log(_context2.t0);return _context2.abrupt(\"return\",rejectWithValue(_context2.t0));case 12:case\"end\":return _context2.stop();}},_callee2,null,[[1,8]]);}))).apply(this,arguments);});export var signOutAsync=createAsyncThunk(\"user/signOut\",function(_x4){return(_ref4=_ref4||_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(loginInfo){var response;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:_context3.next=2;return signOut(loginInfo);case 2:response=_context3.sent;return _context3.abrupt(\"return\",response.data);case 4:case\"end\":return _context3.stop();}},_callee3);}))).apply(this,arguments);});export var authSlice=createSlice({name:\"user\",initialState:initialState,// The `reducers` field lets us define reducers and generate associated actions\nreducers:{increment:function increment(state){state.value+=1;}},// The `extraReducers` field lets the slice handle actions defined elsewhere,\n// including actions generated by createAsyncThunk or in other slices.\nextraReducers:function extraReducers(builder){builder.addCase(createUserAsync.pending,function(state){state.status=\"loading\";}).addCase(createUserAsync.fulfilled,function(state,action){state.status=\"idle\";state.loggedInUserToken=action.payload;}).addCase(checkUserAsync.pending,function(state){state.status=\"loading\";}).addCase(checkUserAsync.fulfilled,function(state,action){state.status=\"idle\";state.loggedInUserToken=action.payload;}).addCase(checkUserAsync.rejected,function(state,action){state.status=\"idle\";state.error=action.payload;}).addCase(signOutAsync.pending,function(state){state.status=\"loading\";}).addCase(signOutAsync.fulfilled,function(state,action){state.status=\"idle\";state.loggedInUserToken=null;});}});export var selectLoggedInUser=function selectLoggedInUser(state){return state.auth.loggedInUserToken;};var increment=authSlice.actions.increment;export{increment};export default authSlice.reducer;export var selectError=function selectError(state){return state.auth.error;};","map":{"version":3,"names":["createAsyncThunk","createSlice","createUser","checkUser","signOut","updateUser","initialState","value","status","loggedInUserToken","error","createUserAsync","_x","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","userData","response","wrap","_callee$","_context","prev","next","sent","abrupt","data","stop","apply","arguments","checkUserAsync","_x2","_x3","_ref3","_callee2","loginInfo","_ref2","rejectWithValue","_callee2$","_context2","t0","console","log","signOutAsync","_x4","_ref4","_callee3","_callee3$","_context3","authSlice","name","reducers","increment","state","extraReducers","builder","addCase","pending","fulfilled","action","payload","rejected","selectLoggedInUser","auth","actions","reducer","selectError"],"sources":["D:/Humber 2023/Semester 3/Capstone Project/urban_clothing_v1.0/src/features/auth/authSlice.js"],"sourcesContent":["import { createAsyncThunk, createSlice } from \"@reduxjs/toolkit\";\r\nimport { createUser, checkUser, signOut } from \"./authAPI\";\r\nimport { updateUser } from \"../user/userAPI\";\r\n\r\nconst initialState = {\r\n  value: 0,\r\n  status: \"idle\",\r\n  loggedInUserToken: null,\r\n  error: null,\r\n};\r\n\r\nexport const createUserAsync = createAsyncThunk(\r\n  \"user/createUser\",\r\n  async (userData) => {\r\n    const response = await createUser(userData);\r\n    // The value we return becomes the `fulfilled` action payload\r\n    return response.data;\r\n  }\r\n);\r\n\r\nexport const checkUserAsync = createAsyncThunk(\r\n  \"user/checkUser\",\r\n  async (loginInfo, {rejectWithValue}) => {\r\n    try {\r\n      const response = await checkUser(loginInfo);\r\n      // The value we return becomes the `fulfilled` action payload\r\n      return response.data;\r\n    } catch (error) {\r\n      console.log(error);\r\n      return rejectWithValue(error);\r\n    }\r\n  }\r\n);\r\n\r\nexport const signOutAsync = createAsyncThunk(\r\n  \"user/signOut\",\r\n  async (loginInfo) => {\r\n    const response = await signOut(loginInfo);\r\n    // The value we return becomes the `fulfilled` action payload\r\n    return response.data;\r\n  }\r\n);\r\n\r\nexport const authSlice = createSlice({\r\n  name: \"user\",\r\n  initialState,\r\n  // The `reducers` field lets us define reducers and generate associated actions\r\n  reducers: {\r\n    increment: (state) => {\r\n      state.value += 1;\r\n    },\r\n  },\r\n  // The `extraReducers` field lets the slice handle actions defined elsewhere,\r\n  // including actions generated by createAsyncThunk or in other slices.\r\n  extraReducers: (builder) => {\r\n    builder\r\n      .addCase(createUserAsync.pending, (state) => {\r\n        state.status = \"loading\";\r\n      })\r\n      .addCase(createUserAsync.fulfilled, (state, action) => {\r\n        state.status = \"idle\";\r\n        state.loggedInUserToken = action.payload;\r\n      })\r\n      .addCase(checkUserAsync.pending, (state) => {\r\n        state.status = \"loading\";\r\n      })\r\n      .addCase(checkUserAsync.fulfilled, (state, action) => {\r\n        state.status = \"idle\";\r\n        state.loggedInUserToken = action.payload;\r\n      })\r\n      .addCase(checkUserAsync.rejected, (state, action) => {\r\n        state.status = \"idle\";\r\n        state.error = action.payload;\r\n      })\r\n      .addCase(signOutAsync.pending, (state) => {\r\n        state.status = \"loading\";\r\n      })\r\n      .addCase(signOutAsync.fulfilled, (state, action) => {\r\n        state.status = \"idle\";\r\n        state.loggedInUserToken = null;\r\n      });\r\n  },\r\n});\r\nexport const selectLoggedInUser = (state) => state.auth.loggedInUserToken;\r\nexport const { increment } = authSlice.actions;\r\nexport default authSlice.reducer;\r\nexport const selectError = (state) => state.auth.error;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}