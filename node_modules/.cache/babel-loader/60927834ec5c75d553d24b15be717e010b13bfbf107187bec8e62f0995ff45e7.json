{"ast":null,"code":"import _slicedToArray from\"D:/Humber 2023/Semester 3/Capstone Project/urban_clothing_v1.0/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from\"react\";import{loadStripe}from\"@stripe/stripe-js\";import{Elements}from\"@stripe/react-stripe-js\";import CheckoutForm from\"./CheckoutForm\";import\"../Stripe.css\";import{useSelector}from\"react-redux\";import{selectOrderCurrent}from\"../features/order/orderSlice\";import NavBar from\"../features/navbar/Navbar\";// Make sure to call loadStripe outside of a component’s render to avoid\n// recreating the Stripe object on every render.\n// This is your test publishable API key.\nimport{jsx as _jsx}from\"react/jsx-runtime\";var stripePromise=loadStripe(\"pk_test_51O2QBjKwE7BrlPUUtAKA0ZcPh3gEDmiS5ELfq6VVHogFbkjsxocqqw9REYF1uD7CxsMNLBpTY3CcYS6tgqfPJZfq00DgaEPB87\");export default function CheckoutStripe(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),clientSecret=_useState2[0],setClientSecret=_useState2[1];var orderCurrent=useSelector(selectOrderCurrent);useEffect(function(){// Create PaymentIntent as soon as the page loads\nfetch(\"/create-payment-intent\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({totalAmount:orderCurrent.totalAmount})}).then(function(res){return res.json();}).then(function(data){return setClientSecret(data.clientSecret);});},[]);var appearance={theme:'stripe'};var options={clientSecret:clientSecret,appearance:appearance};return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(NavBar,{children:/*#__PURE__*/_jsx(\"div\",{className:\"Stripe\",children:clientSecret&&/*#__PURE__*/_jsx(Elements,{options:options,stripe:stripePromise,children:/*#__PURE__*/_jsx(CheckoutForm,{})})})})});}","map":{"version":3,"names":["React","useState","useEffect","loadStripe","Elements","CheckoutForm","useSelector","selectOrderCurrent","NavBar","jsx","_jsx","stripePromise","CheckoutStripe","_useState","_useState2","_slicedToArray","clientSecret","setClientSecret","orderCurrent","fetch","method","headers","body","JSON","stringify","totalAmount","then","res","json","data","appearance","theme","options","children","className","stripe"],"sources":["D:/Humber 2023/Semester 3/Capstone Project/urban_clothing_v1.0/src/pages/CheckoutStripe.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { loadStripe } from \"@stripe/stripe-js\";\r\nimport { Elements } from \"@stripe/react-stripe-js\";\r\n\r\nimport CheckoutForm from \"./CheckoutForm\";\r\nimport \"../Stripe.css\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { selectOrderCurrent } from \"../features/order/orderSlice\";\r\nimport NavBar from \"../features/navbar/Navbar\";\r\n\r\n// Make sure to call loadStripe outside of a component’s render to avoid\r\n// recreating the Stripe object on every render.\r\n// This is your test publishable API key.\r\nconst stripePromise = loadStripe(\"pk_test_51O2QBjKwE7BrlPUUtAKA0ZcPh3gEDmiS5ELfq6VVHogFbkjsxocqqw9REYF1uD7CxsMNLBpTY3CcYS6tgqfPJZfq00DgaEPB87\");\r\n\r\nexport default function CheckoutStripe() {\r\n  const [clientSecret, setClientSecret] = useState(\"\");\r\n  const orderCurrent = useSelector(selectOrderCurrent);\r\n\r\n  useEffect(() => {\r\n    // Create PaymentIntent as soon as the page loads\r\n    fetch(\"/create-payment-intent\", {\r\n      method: \"POST\",\r\n      headers: { \"Content-Type\": \"application/json\" },\r\n      body: JSON.stringify({ totalAmount: orderCurrent.totalAmount }),\r\n    })\r\n      .then((res) => res.json())\r\n      .then((data) => setClientSecret(data.clientSecret));\r\n  }, []);\r\n\r\n  const appearance = {\r\n    theme: 'stripe',\r\n  };\r\n  const options = {\r\n    clientSecret,\r\n    appearance,\r\n  };\r\n\r\n  return (\r\n    <div>\r\n        <NavBar>\r\n    <div className=\"Stripe\">\r\n      {clientSecret && (\r\n        <Elements options={options} stripe={stripePromise}>\r\n          <CheckoutForm />\r\n        </Elements>\r\n      )}\r\n    </div>\r\n    </NavBar>\r\n    </div>\r\n  );\r\n}"],"mappings":"oJAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,OAASC,UAAU,KAAQ,mBAAmB,CAC9C,OAASC,QAAQ,KAAQ,yBAAyB,CAElD,MAAO,CAAAC,YAAY,KAAM,gBAAgB,CACzC,MAAO,eAAe,CACtB,OAASC,WAAW,KAAQ,aAAa,CACzC,OAASC,kBAAkB,KAAQ,8BAA8B,CACjE,MAAO,CAAAC,MAAM,KAAM,2BAA2B,CAE9C;AACA;AACA;AAAA,OAAAC,GAAA,IAAAC,IAAA,yBACA,GAAM,CAAAC,aAAa,CAAGR,UAAU,CAAC,6GAA6G,CAAC,CAE/I,cAAe,SAAS,CAAAS,cAAcA,CAAA,CAAG,CACvC,IAAAC,SAAA,CAAwCZ,QAAQ,CAAC,EAAE,CAAC,CAAAa,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAA7CG,YAAY,CAAAF,UAAA,IAAEG,eAAe,CAAAH,UAAA,IACpC,GAAM,CAAAI,YAAY,CAAGZ,WAAW,CAACC,kBAAkB,CAAC,CAEpDL,SAAS,CAAC,UAAM,CACd;AACAiB,KAAK,CAAC,wBAAwB,CAAE,CAC9BC,MAAM,CAAE,MAAM,CACdC,OAAO,CAAE,CAAE,cAAc,CAAE,kBAAmB,CAAC,CAC/CC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAAC,CAAEC,WAAW,CAAEP,YAAY,CAACO,WAAY,CAAC,CAChE,CAAC,CAAC,CACCC,IAAI,CAAC,SAACC,GAAG,QAAK,CAAAA,GAAG,CAACC,IAAI,CAAC,CAAC,GAAC,CACzBF,IAAI,CAAC,SAACG,IAAI,QAAK,CAAAZ,eAAe,CAACY,IAAI,CAACb,YAAY,CAAC,GAAC,CACvD,CAAC,CAAE,EAAE,CAAC,CAEN,GAAM,CAAAc,UAAU,CAAG,CACjBC,KAAK,CAAE,QACT,CAAC,CACD,GAAM,CAAAC,OAAO,CAAG,CACdhB,YAAY,CAAZA,YAAY,CACZc,UAAU,CAAVA,UACF,CAAC,CAED,mBACEpB,IAAA,QAAAuB,QAAA,cACIvB,IAAA,CAACF,MAAM,EAAAyB,QAAA,cACXvB,IAAA,QAAKwB,SAAS,CAAC,QAAQ,CAAAD,QAAA,CACpBjB,YAAY,eACXN,IAAA,CAACN,QAAQ,EAAC4B,OAAO,CAAEA,OAAQ,CAACG,MAAM,CAAExB,aAAc,CAAAsB,QAAA,cAChDvB,IAAA,CAACL,YAAY,GAAE,CAAC,CACR,CACX,CACE,CAAC,CACE,CAAC,CACJ,CAAC,CAEV"},"metadata":{},"sourceType":"module","externalDependencies":[]}